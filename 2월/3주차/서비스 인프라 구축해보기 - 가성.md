## 아키텍처를 설명해주세요
아래의 아키텍처는 Hello, GSM 이란 프로젝트를 진행하였을때 구축하였던 아키텍처입니다. 
![image](https://user-images.githubusercontent.com/82383294/220021126-f3603aeb-87e7-45aa-89c1-f5dd5008d4f1.png)

### 개발자
개발한 코드를 깃허브에 업로드하게 되면 code series 의 code pipeline 이 관리하는 code deploy 와 code build 로 CI/CD 가 진행되어 각각 맞는 서버로 배포가 진행됩니다. 모노레
포를 사용하였었기 떄문에 admin 쪽의 파일이 변경되면 admin 서버에 배포를, clinet 쪽의 파일이 변경되면 client 서버에 배포를 하는 식으로 진행하였습니다.
<br><br>
또한 cloud watch 를 통해 500에러가 발생하면 sns -> lambda -> discord 를 통해서 에러 알람을 받아 신속하게 에러 대응이 가능합니다.
### 운영자
서버내부에서 오류가 발생하는 등 서버에 직접적으로 접속을 하여야할땐 public subnet 에 위치하는 bastion 을 통하여 private subnet에 위치하는 client, admin, test 서버에 접속합니다.
### 유저
Route53 에 등록된 hellogsm.kr 이란 도메인을 구글 등의 브라우저에 검색하여 사이트에 접속하게 됩니다.
## 왜 이렇게, 어떻게 구축하였나요?
### EC2
- 개발을 모노레포로 진행하였기 때문에 이 모노레포의 애플리케이션을 각각 관리할 서버 2대와, Prod 서버에 코드를 반영하기전에 스테이징 해볼 Stg 서버 1대 이렇게 총 3대로 EC2를 구축하였습니다.
- 사용자들이 합격 결과를 확인하기 위해 한번에 몰려올때를 대비하여 오토 스케일링을 배치하여 서버가 쉽게 확장,축소 될 수 있도록 하였습니다.

### VPC
- 여러 개의 VPC는 필요하다 필요를 못느껴 하나의 VPC 로 관리하였습니다.
- 각 가용영역의 부하를 방지하기 위해서 어드민, 클라이언트 서버를 각각 다른 가용영역에 배치하였으며 사용량이 적은 어드민쪽의 가용영역에 스테이징 서버도 배치하였습니다.

### RDS
- RDS도 admin, client 각각 하나씩 필요하여 해당 EC2 가 있는 가용영역에 배치해주었습니다.

### Route 53
- 가비아에서 구매한 도메인과 SSL 인증서를 등록하여 프론트엔드와 https 통신이 가능하도록 하였습니다.

### ALB
- private ec2에 있는 서버들과 도메인으로 통신을 하기 위해 SSL 인증서를 등록하고 https 통신이 가능하게 하였습니다.
- 물론 트래픽의 분산의 역할도 있긴하지만 한 가용영역에 서버가 많지 않아 트래픽 분산의 역할은 큰 의미가 없다 생각합니다.

### Code Series(code pipeline, codedeploy, codebuild)
- CICD 를 위해 채택한 도구입니다.
- 각 서버에 codedeploy agent를 설치하여 배포 자동화를 가능하게 하였으며 code build 로 ci 를 code deploy 로 CD 를 진행하였습니다.

### 로깅
- cloud watch 를 채택하였습니다.
- 500에러가 울렸을때 트리거가 발생하여 이메일로 전송된 오류 알람 메시지를 lambda 를 통해 디스코드로 전달하여줍니다.
- 
## 구축할때 힘들었던 점
- clouddeploy agent가 특정 운영체제에선 설치가 복잡하고 까다로워 그냥 포기하고 운영체제를 변경하였음. (Linux -> Ubuntu)
- lambda 에서 알람을 울리는 코드가 공부를 좀 해야하는 코드인지라 나도 아직 완벽히 짜지 못함(긁고 조금 수정했음)
- Route53에 등록한 도메인과 SSL 인증서가 언제 제대로 등록이 될지 모름.
- CICD를 진행할때 스크립트를 작성해야하는데 이 스크립트가 틀려서 울리는 알람이 내 멘탈을 힘들게 하였음.
